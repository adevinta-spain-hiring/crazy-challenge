<html>
<head>
    <title>Adevinta Spain Crazy Challenge</title>
</head>
<body style="background-color:#2900D2;">
<div style="width: 100%; height: 100%; text-align: center">
    <p id="crazy-text" style="color: white; font-family: 'Roboto Light'; font-size: 6vw;">
        * * *
    </p>
    <img src="adevinta-spain.png" style="width: 25%;">
</div>
<script>
    const crazyTimeoutSeconds = 20
    let crazyStartedOn = new Date()

    secondsSinceCrazyStarted = function () {
        return (new Date().getTime() - crazyStartedOn.getTime()) / 1000
    }

    const crazyText = [
        {
            key: 't',
            hidden: true,
            text: 'Together'
        },
        {
            key: 'c',
            hidden: true,
            text: 'Creating'
        },
        {
            key: 'c',
            hidden: true,
            text: 'Craziness ðŸ¤ª'
        }
    ];

    printCrazyText = function () {
        document.getElementById('crazy-text').innerHTML = crazyText
            .map(value => value.hidden ? '*' : value.text)
            .reduce((text, value_text) => text + ' ' + value_text)
    }

    resetCrazyText = function () {
        crazyText.forEach(value => value.hidden = true)
    }

    resetCrazyTextOnTimeout = function () {
        if (crazyText.some(value => value.hidden)) {
            if (secondsSinceCrazyStarted() > crazyTimeoutSeconds) {
                crazyStartedOn = new Date()
                resetCrazyText()
                printCrazyText()
            }
        }
    }

    window.setInterval(resetCrazyTextOnTimeout, 500)

    window.addEventListener('keydown', event => {
        crazyText.some(value => {
            if (value.hidden) {
                if (value.key === event.key.toLowerCase()) {
                    value.hidden = false
                } else {
                    resetCrazyText()
                }
                printCrazyText()
                return true
            }
        })
    });
</script>
</body>
</html>
